:root {
  /* Color options */
  --bg: #fffdf8;
  --text: #1e1e1e;
  --link: #282d43;
  --link-underline: #2729385a;
  --link-hover: #292b3dbb;
  --link-hover-underline: #292b3d79;
  --link-highlight: #3d71e2;
  --link-highlight-underline: #3d71e2b3;
  --link-highlight-hover: #3d71e2e6;
  --link-highlight-faded: #3537518b;
  --link-highlight-faded-hover: #353751b3;
  --highlight-bg: #8879ff33;
  --dividers: #ccc;
  --footer: #888;
  /* Font & text options */
  --font-size: 14px; /* 13.5px */
  --line-height: 1.1;
  --indentation: 6ch; /* For lists, blockquotes, etc. */
  /* Layout options */
  --header-height: 5rem;
  --header-height-mobile: 4rem;
  --header-spacing-mobile: 2lh;
  --col-width-left: 25%; /* 25% */
  --col-width-center: 45%; /* 45% | 38% */
  --col-width-center-transition: 55%; /* When transitioning to mobile layout (before it gets full-width) */
  --col-width-right: 30%; /* 30% */
  --col-spacing: 1.5rem;
  --show-vdivider: 1; /* Divider between left and center column; show/hide */
  --show-hdivider: 1; /* Divider(s) under header; show/hide */
  /* Other options */
  --img-radius: 4px;
}

/* ------------------------------------------------------------------------------------------------------------------------------------ */

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}
html, body {
  height: 100%;
  display: flex;
  flex-direction: column;
  scrollbar-gutter: stable; /* Prevents layout shift when scrollbar appears */
}
body {
  /* Background */
  background-color: var(--bg);
  /* Text */
  font-family: 'Reddit Mono', monospace;
  /*
    Mono:
      Reddit, Geist, Roboto, IBM Plex, Noto Sans, JetBrains, Plaid S
    Sans:
      Inter, Geist, Bricolage Grotesque, Hanken Grotesk, Spline Sans
  */
  font-size: var(--font-size);
  color: var(--text);
  line-height: var(--line-height);
}

main {
  flex: 1;
}
.page {
  display: flex;
}

/* The three main columns */
.col {
  display: flex;
  flex-direction: column;
  min-height: 0; /* Important for scrollable columns */
}

.left {
  width: var(--col-width-left);
  height: calc(100vh - 2rem);
  position: sticky;
  top: 1rem;
  padding-left: 1rem;
  padding-right: var(--col-spacing);
  /* Border on right side of left column */
  border-right: 1px solid var(--dividers);
  border-right-color: rgba(204, 204, 204, var(--show-vdivider));
  /* Enable scrolling if content overflows */
  overflow-y: auto;
  /* Hide scrollbar */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer and Edge */
} /* Hide scrollbar (continued) */
.left::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}
.center {
  width: var(--col-width-center);
  padding-top: 1rem;
  padding-left: var(--col-spacing);
  padding-right: var(--col-spacing);
}
.right {
  width: var(--col-width-right);
  height: calc(100vh - 2rem);
  position: fixed;
  right: calc(100% - (var(--col-width-left) + var(--col-width-center) + var(--col-width-right)));
  top: 1rem;
  padding-left: var(--col-spacing);
  padding-right: 2rem;
  color: var(--link);
  /* Border on left side of left column & left header */
  border-left: 1px solid var(--dividers);
  border-left-color: rgba(204, 204, 204, var(--show-vdivider));
}

/* ------------------------------------------------------------------------------------------------------------------------------------ */

/* Header */
header {
  display: flex;
  flex-direction: column;
  height: var(--header-height);
  margin-bottom: 1lh;
  /* Divider */
  border-bottom: 1px solid var(--dividers);
  border-bottom-color: rgba(204, 204, 204, var(--show-hdivider));
}
.header-single > div {
  flex-direction: row;
}
.header-single {
  border-bottom: none;
  height: calc(var(--header-height) - 3lh);
}

/* Footer */
footer {
  position: fixed;
  width: calc(var(--col-width-left) - 2rem);
  background-color: var(--bg);
  bottom: 0;
  padding-top: 0.5rem;
  padding-bottom: 1rem;
  color: var(--footer); /* Grayed out */
}
footer > a {
  color: var(--footer);
}
footer > a.external {
  color: var(--footer);
}
.footer-center {
  position: relative;
  width: 100%;
  height: calc(var(--header-height) + 1lh);
  padding-top: 0;
  /* Align text to bottom */
  display: flex;
  align-items: flex-end;
  /* Divider */
  border-top: 1px solid var(--dividers);
  border-top-color: rgba(204, 204, 204, var(--show-hdivider));
}

/* ------------------------------------------------------------------------------------------------------------------------------------ */

/* Headings */
h1, h2, h3, h4, h5, h6 {
  font-size: var(--font-size);
  font-weight: normal;
  color: var(--link);
  text-decoration: underline;
  text-decoration-color: var(--link-underline);
}

/* Reset counters at each heading level */
h1 {
  text-align: left; /* alt: center */
  /* Underline */
  text-decoration: none; /* Remove default underline */
  border-bottom: 1px solid var(--dividers);
  border-bottom-color: rgb(204, 204, 204);
  background-color: var(--bg); /* Only important when sticky */
  height: 2lh; /* More space for underline */
  margin-bottom: 1lh;
}
h2 {
  margin-top: 1lh;
  margin-bottom: 1lh;
  counter-increment: h2;
  counter-reset: h3;
}
h3 {
  margin-top: 1lh;
  margin-bottom: 1lh;
  counter-increment: h3;
  counter-reset: h4;
}
h4 {
  margin-top: 1lh;
  margin-bottom: 1lh;
  counter-increment: h4;
  counter-reset: h5;
}
h5 {
  margin-top: 1lh;
  margin-bottom: 1lh;
  counter-increment: h5;
  counter-reset: h6;
}
h6 {
  margin-top: 1lh;
  margin-bottom: 1lh;
  counter-increment: h6;
}
/* Numbering for each heading level */
h2::before {
  content: counter(h2) ". ";
}
h3::before {
  content: counter(h2) "." counter(h3) ". ";
}
h4::before {
  content: counter(h2) "." counter(h3) "." counter(h4) ". ";
}
h5::before {
  content: counter(h2) "." counter(h3) "." counter(h4) "." counter(h5) ". ";
}
h6::before {
  content: counter(h2) "." counter(h3) "." counter(h4) "." counter(h5) "." counter(h6) ". ";
}
/* Heading anchors */
h1, h2, h3, h4, h5, h6 {
  font-weight: normal;
  scroll-margin-top: calc(var(--header-height) + 2rem);
}
/*h1:hover .heading-anchor,*/
h2:hover .heading-anchor,
h3:hover .heading-anchor,
h4:hover .heading-anchor,
h5:hover .heading-anchor,
h6:hover .heading-anchor {
  opacity: 1;
}
.heading-anchor {
  font-weight: normal;
  text-decoration: none;
  color: var(--link-faded);
  opacity: 0;
  transition: opacity 0.2s ease;
}
.heading-anchor::before {
  content: " #";
}
/* Solo h1 headings */
h1.solo-heading {
  text-align: left;
  margin-bottom: 1lh;
}

/* Paragraphs */
p {
  /*margin-top: 1lh;  One line above */
  margin-bottom: 1lh; /* One line below */
  text-indent: 0; /* No indent on first line */
}
.col.left > div > p {
  margin-top: 0;
}

/* Blockquotes */
blockquote {
  padding-left: 4ch;
  padding-right: 4ch;
  /*border: 1px solid var(--dividers);*/
  border-radius: var(--img-radius);
}

/* Lists */
ul, ol {
  list-style-position: outside;  /* Bullet/number outside, text aligns with grid */
  padding-left: var(--indentation);  /* Indent by multiple of character widths */
  margin-bottom: 1lh;
}
li {
  text-indent: 0; /* No extra indent on wrapped lines */
}
li ul, li ol { /* Nested lists */
  margin-top: 0;
  margin-bottom: 0;
}

/* Highlighted text */
mark {
  background-color: var(--highlight-bg);
}

/* Horizontal rules */
hr {
  border: none; /* Remove default border */
  border-top: 1px solid var(--dividers); /* Custom horizontal rule */
  margin: 2lh 0;
}

/* Links
- default: ...
- wikilink: bright
- external: bright
*/
a {
  color: var(--link);
  text-decoration: underline;
  text-decoration-color: var(--link-underline);
  text-decoration-thickness: 1px;
  /*white-space: nowrap;  Prevent line breaks in links */
}
a:hover {
  color: var(--link-hover);
  text-decoration-color: var(--link-hover-underline);
}
/*a.wikilink, a.external {
  color: var(--link-highlight);
  text-decoration: underline;
  text-decoration-color: var(--link-highlight-underline);
}
a.wikilink:hover, a.external:hover {
  color: var(--link-highlight-hover);
  text-decoration-color: var(--link-highlight-underline);
}*/
a.wikilink-missing {
  color: var(--link-highlight-faded);
  text-decoration: underline dotted 1px;
}
a.wikilink-missing:hover {
  color: var(--link-highlight-faded-hover);
}
a.external::after {
  content: " â†—";
}

/* Images */
img {
  border-radius: var(--img-radius);
  display: block;
  width: 100%;
  height: auto;
  margin-top: 2lh;
  margin-bottom: 2lh;
  /* Center */
  margin-left: auto;
  margin-right: auto;
}
/* Videos */
video {
  border-radius: var(--img-radius);
  display: block;
  width: 100%;
  height: auto;
  margin-top: 2lh;
  margin-bottom: 2lh;
  /* Center */
  margin-left: auto;
  margin-right: auto;
}
/* PDFs */
embed {
  border-radius: var(--img-radius);
  display: block;
  width: 100%;
  height: 600px;
  margin-top: 2lh;
  margin-bottom: 2lh;
  /* Center */
  margin-left: auto;
  margin-right: auto;
}

/* ------------------------------------------------------------------------------------------------------------------------------------ */

/* Articles; Main page content */
article {
  padding-bottom: 3lh; /* Space below articles */
}
article > p:first-of-type > img {
  margin-top: 0; /* No top margin for first image in article */
}

/* Two-column layouts */
.twocol {
  display: flex;
  justify-content: left;
  margin-top: 0lh;
  margin-bottom: 1lh;
}
.twocol > p {
  margin: 0; /* Remove default margin */
}
.twocol > p > img {
  margin: 0; /* Remove default margin */
}
.twocol-left {
  width: 50%;
  padding-right: 4ch;
}
.twocol-right {
  width: 50%;
  padding-right: 4ch;
}

/* Frontmatter */
.frontmatter {
  color: var(--link-faded);
  margin-bottom: 1lh;
}
.frontmatter-row {
  display: flex;
}
.frontmatter-label {
  min-width: 10ch;
  text-align: left;
}
.frontmatter-value {
  flex: 1;
}

/* Portfolio feature */
.feature {
  padding-top: 0;
  margin-top: 0;
  margin-bottom: 2lh;
}
.feature a {
  text-decoration: none;
  color: var(--link);
}
.feature a:hover {
  color: var(--link-hover); 
  text-decoration: underline;
  text-decoration-color: var(--link-hover-underline);
}
.feature img {
  margin: 0; /* Remove default margin */
  aspect-ratio: 1140 / 750;
}
.feature .twocol {
  margin-top: 1lh;
}

/* Portfolio grid */
.portfolio-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);

  gap: var(--col-spacing);
  /*column-gap: 3ch;
  row-gap: 1lh;*/

  margin-top: var(--col-spacing);
  margin-bottom: var(--col-spacing);
}
.portfolio-item {
  margin: 0;
}
.portfolio-item a {
  text-decoration: none;
  color: var(--link);
}
.portfolio-item a:hover {
  color: var(--link-hover);
  text-decoration: underline;
  text-decoration-color: var(--link-hover-underline);
}
.thumb {
  position: relative;
  overflow: hidden;
  border-radius: var(--img-radius);
  background-color: #f0f0f0; /* Placeholder background */
}
.thumb img {
  margin: 0; /* Remove default margin */
  aspect-ratio: 630 / 500;
  object-fit: cover; /* Cover the entire area */
  object-position: center; /* Center the image */
}
.title {
  margin-top: 1lh;
}

/* Grouped index */
.grouped-index details summary {
  list-style: none;
  cursor: pointer;
  user-select: none;
}
.grouped-index details summary::-webkit-details-marker {
  display: none; /* Hide default triangle for webkit browser */
}
.grouped-index details summary::marker {
  content: none; /* Hide default triangle for firefox */
}
.grouped-index details summary::before {
  content: "[+] ";
  color: var(--link);
  position: relative;
  bottom: 0.1ch; /* Adjust vertical position */
  user-select: none;
}
.grouped-index details[open] summary::before {
  content: "[âˆ’] ";
  color: var(--link);
  position: relative;
  bottom: 0.2ch;
  user-select: none;
}
.grouped-index details summary:hover::before {
  color: var(--link-hover);
}
.grouped-index ul {
  list-style: none; /* No bullets */
}
.grouped-index > .twocol > .twocol-left {
  width: 30%;
}

/* Listings (as sidebar in right column) */
.listings-items {
  display: flex;
  flex-direction: column;
  padding-right: 3rem;
}
.listings-divider {
  border-top: 1px solid var(--dividers);
  margin-top: 1lh;
  margin-bottom: 1lh;
}
/* Table of contents */
.toc ul {
  list-style: outside;
}
.toc ul li ul {
  margin-left: 4ch;
}

/* ------------------------------------------------------------------------------------------------------------------------------------ */

@media (max-width: 1600px) {
  /* Disable right column/sidebar entirely */
  .col.right {
    display: none;
    /* position: relative;
    right: auto; */
  }
  .col.center {
    width: var(--col-width-center-transition);
  }
}

@media (max-width: 1280px) {
  /* Disable portfolio grid layout â†’ just use columns */
  .portfolio-grid {
    display: flex;
    flex-direction: column;
  }
  .portfolio-item > a > .thumb > img {
    height: auto;
  }
}

@media (max-width: 940px) { /* 768px */
  /* Set page flex direction so main columns are below each other */
  .page {
    flex-direction: column;
    margin: 1rem;
  }
  /* Make sure columns are full width & auto-scaled height */
  .col.left,
  .col.center,
  .col.right {
    width: 100%;
    height: auto;
    padding: 0;
  }
  /* Make left column/sidebar non-sticky â†’ scroll normally */
  .col.left {
    position: relative;
    top: 0;
    border-right: none;
  }

  /* Header default */
  header {
    /* Less height */
    height: auto;
    margin-bottom: var(--header-spacing-mobile);
    /* Remove divider */
    border-bottom: none;
  }
  .header-left {
    width: fit-content;
  }

  /* Home */
  .header-home {
    text-align: right; /* For "PROJECTS" */
    margin-top: 1lh;
    margin-bottom: 1lh;
    /* Sticky behavior? 
    position: sticky;
    top: 0;
    background-color: var(--bg);*/
  }
  .sidebar-home {
    padding-bottom: calc(var(--header-spacing-mobile) - 1lh);
    /* Add divider */
    border-bottom: 1px solid var(--dividers);
    border-bottom-color: rgba(204, 204, 204, var(--show-hdivider));
  }

  /* Single */
  .sidebar-single {
    display: none; /* Hide sidebar text */
  }
  .header-single {
    position: absolute;
    top: 0;
    right: 0;
    margin-top: 1rem;
    margin-right: 1rem;
    /*height: calc(var(--header-height) - 3lh);
    padding-bottom: var(--header-spacing-mobile);
    margin-bottom: var(--header-spacing-mobile);
    border-bottom: 1px solid var(--dividers);
    border-bottom-color: rgba(204, 204, 204, var(--show-hdivider));*/
  }
  h1 {
    text-align: left;
    margin-top: 1lh;
  }  

  /* Hide footer */
  footer {
    display: none;
  }

  /* Two-column layout */
  .twocol-left {
    width: 40%;
  }
  .twocol-right {
    width: 60%;
  }
}
